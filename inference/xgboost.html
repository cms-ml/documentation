<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Documentation of the CMS Machine Learning Group"><link rel=canonical href=https://cms-ml.github.io/documentation/inference/xgboost.html><meta name=author content="CMS Machine Learning Group"><link rel="shortcut icon" href=../images/favicon.png><meta name=generator content="mkdocs-1.1.2, mkdocs-material-5.5.3"><title>XGBoost - CMS Machine Learning Documentation</title><link rel=stylesheet href=../assets/stylesheets/main.947af8d5.min.css><link rel=stylesheet href=../assets/stylesheets/palette.7f672a1f.min.css><meta name=theme-color content=#3f51b5><link href=https://fonts.gstatic.com rel=preconnect crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback"><style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style></head> <body dir=ltr data-md-color-scheme=preference data-md-color-primary=indigo data-md-color-accent=orange> <script>matchMedia("(prefers-color-scheme: dark)").matches&&document.body.setAttribute("data-md-color-scheme","slate")</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#direct-inference-with-xgboost class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header-nav md-grid" aria-label=Header> <a href=https://cms-ml.github.io/documentation title="CMS Machine Learning Documentation" class="md-header-nav__button md-logo" aria-label="CMS Machine Learning Documentation"> <img src=../images/logo.png alt=logo> </a> <label class="md-header-nav__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header-nav__title data-md-component=header-title> <div class=md-header-nav__ellipsis> <span class="md-header-nav__topic md-ellipsis"> CMS Machine Learning Documentation </span> <span class="md-header-nav__topic md-ellipsis"> XGBoost </span> </div> </div> <label class="md-header-nav__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query data-md-state=active> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <button type=reset class="md-search__icon md-icon" aria-label=Clear data-md-component=search-reset tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header-nav__source> <a href=https://github.com/cms-ml/documentation/ title="Go to repository" class=md-source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg> </div> <div class=md-source__repository> cms-ml/documentation </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=https://cms-ml.github.io/documentation title="CMS Machine Learning Documentation" class="md-nav__button md-logo" aria-label="CMS Machine Learning Documentation"> <img src=../images/logo.png alt=logo> </a> CMS Machine Learning Documentation </label> <div class=md-nav__source> <a href=https://github.com/cms-ml/documentation/ title="Go to repository" class=md-source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg> </div> <div class=md-source__repository> cms-ml/documentation </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../index.html title=Home class=md-nav__link> Home </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-2 type=checkbox id=nav-2> <label class=md-nav__link for=nav-2> Innovation <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Innovation data-md-level=1> <label class=md-nav__title for=nav-2> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Innovation </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../innovation/journal_club.html title="ML Journal Club" class=md-nav__link> ML Journal Club </a> </li> <li class=md-nav__item> <a href=../innovation/hackathons.html title="ML Hackathons" class=md-nav__link> ML Hackathons </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-3 type=checkbox id=nav-3> <label class=md-nav__link for=nav-3> Resources <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Resources data-md-level=1> <label class=md-nav__title for=nav-3> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Resources </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Resources/Cloud_Resources/index.html title="Cloud Resources" class=md-nav__link> Cloud Resources </a> </li> <li class=md-nav__item> <a href=../Resources/FPGA_Resources/index.html title="FPGA Resource" class=md-nav__link> FPGA Resource </a> </li> <li class=md-nav__item> <a href=../Resources/GPU_Resources/index.html title="GPU Resources" class=md-nav__link> GPU Resources </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-4 type=checkbox id=nav-4 checked> <label class=md-nav__link for=nav-4> Guides <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Guides data-md-level=1> <label class=md-nav__title for=nav-4> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Guides </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-4-1 type=checkbox id=nav-4-1> <label class=md-nav__link for=nav-4-1> Optimization <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Optimization data-md-level=2> <label class=md-nav__title for=nav-4-1> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Optimization </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../optimization/model_optimization.html title="Model optimization" class=md-nav__link> Model optimization </a> </li> <li class=md-nav__item> <a href=../optimization/importance.html title="Feature importance" class=md-nav__link> Feature importance </a> </li> <li class=md-nav__item> <a href=../optimization/data_augmentation.html title="Data augmentation" class=md-nav__link> Data augmentation </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-4-2 type=checkbox id=nav-4-2> <label class=md-nav__link for=nav-4-2> General Advice <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label="General Advice" data-md-level=2> <label class=md-nav__title for=nav-4-2> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> General Advice </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../general_advice/intro.html title=Introduction class=md-nav__link> Introduction </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-4-2-2 type=checkbox id=nav-4-2-2> <label class=md-nav__link for=nav-4-2-2> Before training <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label="Before training" data-md-level=3> <label class=md-nav__title for=nav-4-2-2> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Before training </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../general_advice/before/domains.html title=Domains class=md-nav__link> Domains </a> </li> <li class=md-nav__item> <a href=../general_advice/before/features.html title=Features class=md-nav__link> Features </a> </li> <li class=md-nav__item> <a href=../general_advice/before/inputs.html title=Inputs class=md-nav__link> Inputs </a> </li> <li class=md-nav__item> <a href=../general_advice/before/model.html title=Model class=md-nav__link> Model </a> </li> <li class=md-nav__item> <a href=../general_advice/before/metrics.html title="Metrics & Losses" class=md-nav__link> Metrics & Losses </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-4-2-3 type=checkbox id=nav-4-2-3> <label class=md-nav__link for=nav-4-2-3> During training <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label="During training" data-md-level=3> <label class=md-nav__title for=nav-4-2-3> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> During training </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../general_advice/during/overfitting.html title=Overfitting class=md-nav__link> Overfitting </a> </li> <li class=md-nav__item> <a href=../general_advice/during/xvalidation.html title=Cross-validation class=md-nav__link> Cross-validation </a> </li> <li class=md-nav__item> <a href=../general_advice/during/opt.html title="Optimisation problems" class=md-nav__link> Optimisation problems </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../general_advice/after/after.html title="After training" class=md-nav__link> After training </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-4-3 type=checkbox id=nav-4-3 checked> <label class=md-nav__link for=nav-4-3> Inference <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Inference data-md-level=2> <label class=md-nav__title for=nav-4-3> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Inference </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-4-3-1 type=checkbox id=nav-4-3-1 checked> <label class=md-nav__link for=nav-4-3-1> Direct inference <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label="Direct inference" data-md-level=3> <label class=md-nav__title for=nav-4-3-1> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Direct inference </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=tensorflow1.html title="TensorFlow 1" class=md-nav__link> TensorFlow 1 </a> </li> <li class=md-nav__item> <a href=tensorflow2.html title="TensorFlow 2" class=md-nav__link> TensorFlow 2 </a> </li> <li class=md-nav__item> <a href=pytorch.html title=PyTorch class=md-nav__link> PyTorch </a> </li> <li class=md-nav__item> <a href=pyg.html title="PyTorch Geometric" class=md-nav__link> PyTorch Geometric </a> </li> <li class=md-nav__item> <a href=onnx.html title=ONNX class=md-nav__link> ONNX </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> XGBoost <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"/></svg> </span> </label> <a href=xgboost.html title=XGBoost class="md-nav__link md-nav__link--active"> XGBoost </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Table of contents </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#general class=md-nav__link> General </a> <nav class=md-nav aria-label=General> <ul class=md-nav__list> <li class=md-nav__item> <a href=#existing-examples class=md-nav__link> Existing Examples </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#example-classification-of-points-from-joint-gaussian-distribution class=md-nav__link> Example: Classification of points from joint-Gaussian distribution. </a> <nav class=md-nav aria-label="Example: Classification of points from joint-Gaussian distribution."> <ul class=md-nav__list> <li class=md-nav__item> <a href=#preparing-model class=md-nav__link> Preparing Model </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#cc-usage-with-cmssw class=md-nav__link> C/C++ Usage with CMSSW </a> <nav class=md-nav aria-label="C/C++ Usage with CMSSW"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#module-setup class=md-nav__link> Module setup </a> </li> <li class=md-nav__item> <a href=#basic-usage-of-c-api class=md-nav__link> Basic Usage of C API </a> </li> <li class=md-nav__item> <a href=#full-example class=md-nav__link> Full Example </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#python-usage class=md-nav__link> Python Usage </a> </li> <li class=md-nav__item> <a href=#caveat class=md-nav__link> Caveat </a> </li> <li class=md-nav__item> <a href=#appendix-tips-for-xgboost-users class=md-nav__link> Appendix: Tips for XGBoost users </a> <nav class=md-nav aria-label="Appendix: Tips for XGBoost users"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#importance-plot class=md-nav__link> Importance Plot </a> </li> <li class=md-nav__item> <a href=#roc-curve-and-auc class=md-nav__link> ROC Curve and AUC </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#reference-of-xgboost class=md-nav__link> Reference of XGBoost </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=hls4ml.html title=hls4ml class=md-nav__link> hls4ml </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-4-3-2 type=checkbox id=nav-4-3-2> <label class=md-nav__link for=nav-4-3-2> Inference as a service <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label="Inference as a service" data-md-level=3> <label class=md-nav__title for=nav-4-3-2> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Inference as a service </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=sonic_triton.html title=Sonic/Triton class=md-nav__link> Sonic/Triton </a> </li> <li class=md-nav__item> <a href=tfaas.html title=TFaaS class=md-nav__link> TFaaS </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-4-3-3 type=checkbox id=nav-4-3-3> <label class=md-nav__link for=nav-4-3-3> Non-standard workflows <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label="Non-standard workflows" data-md-level=3> <label class=md-nav__title for=nav-4-3-3> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Non-standard workflows </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=standalone.html title="Standalone framework" class=md-nav__link> Standalone framework </a> </li> <li class=md-nav__item> <a href=swan_aws.html title="SWAN + AWS" class=md-nav__link> SWAN + AWS </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=checklist.html title="Integration checklist" class=md-nav__link> Integration checklist </a> </li> <li class=md-nav__item> <a href=performance.html title=Performance class=md-nav__link> Performance </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-4-3-6 type=checkbox id=nav-4-3-6> <label class=md-nav__link for=nav-4-3-6> Successful integrations <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label="Successful integrations" data-md-level=3> <label class=md-nav__title for=nav-4-3-6> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Successful integrations </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=particlenet.html title=ParticleNet class=md-nav__link> ParticleNet </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-4-4 type=checkbox id=nav-4-4> <label class=md-nav__link for=nav-4-4> Training <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Training data-md-level=2> <label class=md-nav__title for=nav-4-4> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Training </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-4-4-1 type=checkbox id=nav-4-4-1> <label class=md-nav__link for=nav-4-4-1> Training as a Service <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label="Training as a Service" data-md-level=3> <label class=md-nav__title for=nav-4-4-1> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Training as a Service </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../training/MLaaS4HEP.html title=MLaaS4HEP class=md-nav__link> MLaaS4HEP </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Table of contents </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#general class=md-nav__link> General </a> <nav class=md-nav aria-label=General> <ul class=md-nav__list> <li class=md-nav__item> <a href=#existing-examples class=md-nav__link> Existing Examples </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#example-classification-of-points-from-joint-gaussian-distribution class=md-nav__link> Example: Classification of points from joint-Gaussian distribution. </a> <nav class=md-nav aria-label="Example: Classification of points from joint-Gaussian distribution."> <ul class=md-nav__list> <li class=md-nav__item> <a href=#preparing-model class=md-nav__link> Preparing Model </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#cc-usage-with-cmssw class=md-nav__link> C/C++ Usage with CMSSW </a> <nav class=md-nav aria-label="C/C++ Usage with CMSSW"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#module-setup class=md-nav__link> Module setup </a> </li> <li class=md-nav__item> <a href=#basic-usage-of-c-api class=md-nav__link> Basic Usage of C API </a> </li> <li class=md-nav__item> <a href=#full-example class=md-nav__link> Full Example </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#python-usage class=md-nav__link> Python Usage </a> </li> <li class=md-nav__item> <a href=#caveat class=md-nav__link> Caveat </a> </li> <li class=md-nav__item> <a href=#appendix-tips-for-xgboost-users class=md-nav__link> Appendix: Tips for XGBoost users </a> <nav class=md-nav aria-label="Appendix: Tips for XGBoost users"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#importance-plot class=md-nav__link> Importance Plot </a> </li> <li class=md-nav__item> <a href=#roc-curve-and-auc class=md-nav__link> ROC Curve and AUC </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#reference-of-xgboost class=md-nav__link> Reference of XGBoost </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content> <article class="md-content__inner md-typeset"> <a href=https://github.com/cms-ml/documentation/blob/master/content/inference/xgboost.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg> </a> <h1 id=direct-inference-with-xgboost>Direct inference with XGBoost<a class=headerlink href=#direct-inference-with-xgboost title="Permanent link">&para;</a></h1> <h2 id=general>General<a class=headerlink href=#general title="Permanent link">&para;</a></h2> <p>XGBoost is avaliable (at least) since CMSSW_9_2_4 <a href=https://github.com/cms-sw/cmssw/pull/19377>cmssw#19377</a>.</p> <p>In CMSSW environment, XGBoost can be used via its <a href=https://xgboost.readthedocs.io/en/latest/python/python_api.html>Python API</a>.</p> <p>For UL era, there are different verisons available for different <code>SCRAM_ARCH</code>:</p> <ol> <li> <p>For <code>slc7_amd64_gcc700</code> and above, <em>ver.0.80</em> is available.</p> </li> <li> <p>For <code>slc7_amd64_gcc900</code> and above, <em>ver.1.3.3</em> is available.</p> </li> <li> <p>Please note that different major versions have different behavior( See <a href=#caveat>Caveat</a> Session).</p> </li> </ol> <h3 id=existing-examples>Existing Examples<a class=headerlink href=#existing-examples title="Permanent link">&para;</a></h3> <p>There are some existing good examples of using XGBoost under CMSSW, as listed below:</p> <ol> <li> <p><a href=https://github.com/cms-sw/cmssw/blob/6d2f66057131baacc2fcbdd203588c41c885b42c/PhysicsTools/PythonAnalysis/test/testXGBoost_and_sklearn.py>Offical sample</a> for testing the integration of XGBoost library with CMSSW.</p> </li> <li> <p><a href=https://github.com/hqucms/NanoHRT-tools/blob/master/python/helpers/xgbHelper.py>Useful codes</a> created by Dr. Huilin Qu for inference with existing trained model.</p> </li> <li> <p><a href=https://github.com/simonepigazzini/XGBoostCMSSW>C/C++ Interface</a> for inference with existing trained model.</p> </li> </ol> <p>We will provide examples for both C/C++ interface and python interface of XGBoost under CMSSW environment.</p> <h2 id=example-classification-of-points-from-joint-gaussian-distribution>Example: Classification of points from joint-Gaussian distribution.<a class=headerlink href=#example-classification-of-points-from-joint-gaussian-distribution title="Permanent link">&para;</a></h2> <p>In this specific example, you will use XGBoost to classify data points generated from two 8-dimension joint-Gaussian distribution. </p> <table> <thead> <tr> <th>Feature Index</th> <th>0</th> <th>1</th> <th>2</th> <th>3</th> <th>4</th> <th>5</th> <th>6</th> <th>7</th> </tr> </thead> <tbody> <tr> <td>μ<sub>1</sub></td> <td>1</td> <td>2</td> <td>3</td> <td>4</td> <td>5</td> <td>6</td> <td>7</td> <td>8</td> </tr> <tr> <td>μ<sub>2</sub></td> <td>0</td> <td>1.9</td> <td>3.2</td> <td>4.5</td> <td>4.8</td> <td>6.1</td> <td>8.1</td> <td>11</td> </tr> <tr> <td>σ<sub>&frac12;</sub> = σ</td> <td>1</td> <td>1</td> <td>1</td> <td>1</td> <td>1</td> <td>1</td> <td>1</td> <td>1</td> </tr> <tr> <td>|μ<sub>1</sub> - μ<sub>2</sub>| / σ</td> <td>1</td> <td>0.1</td> <td>0.2</td> <td>0.5</td> <td>0.2</td> <td>0.1</td> <td>1.1</td> <td>3</td> </tr> </tbody> </table> <p>All generated data points for train(1:10000,2:10000) and test(1:1000,2:1000) are stored as <a href=code/XGBoost/Train_data.csv><code>Train_data.csv</code></a>/<a href=code/XGBoost/Test_data.csv><code>Test_data.csv</code></a>.</p> <h3 id=preparing-model>Preparing Model<a class=headerlink href=#preparing-model title="Permanent link">&para;</a></h3> <p>The training process of a XGBoost model can be done outside of CMSSW. We provide a python script for illustration. <div class=highlight><pre><span></span><code><span class=c1># importing necessary models</span>
<span class=kn>import</span> <span class=nn>numpy</span> <span class=k>as</span> <span class=nn>np</span>
<span class=kn>import</span> <span class=nn>pandas</span> <span class=k>as</span> <span class=nn>pd</span> 
<span class=kn>from</span> <span class=nn>xgboost</span> <span class=kn>import</span> <span class=n>XGBClassifier</span> <span class=c1># Or XGBRegressor for Logistic Regression</span>
<span class=kn>import</span> <span class=nn>matplotlib.pyplot</span> <span class=k>as</span> <span class=nn>plt</span>
<span class=kn>import</span> <span class=nn>pandas</span> <span class=k>as</span> <span class=nn>pd</span>

<span class=c1># specify parameters via map</span>
<span class=n>param</span> <span class=o>=</span> <span class=p>{</span><span class=s1>&#39;n_estimators&#39;</span><span class=p>:</span><span class=mi>50</span><span class=p>}</span>
<span class=n>xgb</span> <span class=o>=</span> <span class=n>XGBClassifier</span><span class=p>(</span><span class=n>param</span><span class=p>)</span>

<span class=c1># using Pandas.DataFrame data-format, other available format are XGBoost&#39;s DMatrix and numpy.ndarray</span>

<span class=n>train_data</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>read_csv</span><span class=p>(</span><span class=s2>&quot;path/to/the/data&quot;</span><span class=p>)</span> <span class=c1># The training dataset is code/XGBoost/Train_data.csv</span>

<span class=n>train_Variable</span> <span class=o>=</span> <span class=n>train_data</span><span class=p>[</span><span class=s1>&#39;0&#39;</span><span class=p>,</span> <span class=s1>&#39;1&#39;</span><span class=p>,</span> <span class=s1>&#39;2&#39;</span><span class=p>,</span> <span class=s1>&#39;3&#39;</span><span class=p>,</span> <span class=s1>&#39;4&#39;</span><span class=p>,</span> <span class=s1>&#39;5&#39;</span><span class=p>,</span> <span class=s1>&#39;6&#39;</span><span class=p>,</span> <span class=s1>&#39;7&#39;</span><span class=p>]</span>
<span class=n>train_Score</span> <span class=o>=</span> <span class=n>train_data</span><span class=p>[</span><span class=s1>&#39;Type&#39;</span><span class=p>]</span> <span class=c1># Score should be integer, 0, 1, (2 and larger for multiclass)</span>

<span class=n>test_data</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>read_csv</span><span class=p>(</span><span class=s2>&quot;path/to/the/data&quot;</span><span class=p>)</span> <span class=c1># The testing dataset is code/XGBoost/Test_data.csv</span>

<span class=n>test_Variable</span> <span class=o>=</span> <span class=n>test_data</span><span class=p>[</span><span class=s1>&#39;0&#39;</span><span class=p>,</span> <span class=s1>&#39;1&#39;</span><span class=p>,</span> <span class=s1>&#39;2&#39;</span><span class=p>,</span> <span class=s1>&#39;3&#39;</span><span class=p>,</span> <span class=s1>&#39;4&#39;</span><span class=p>,</span> <span class=s1>&#39;5&#39;</span><span class=p>,</span> <span class=s1>&#39;6&#39;</span><span class=p>,</span> <span class=s1>&#39;7&#39;</span><span class=p>]</span>
<span class=n>test_Score</span> <span class=o>=</span> <span class=n>test_data</span><span class=p>[</span><span class=s1>&#39;Type&#39;</span><span class=p>]</span>

<span class=c1># Now the data are well prepared and named as train_Variable, train_Score and test_Variable, test_Score.</span>

<span class=n>xgb</span><span class=o>.</span><span class=n>fit</span><span class=p>(</span><span class=n>train_Variable</span><span class=p>,</span> <span class=n>train_Score</span><span class=p>)</span> <span class=c1># Training</span>

<span class=n>xgb</span><span class=o>.</span><span class=n>predict</span><span class=p>(</span><span class=n>test_Variable</span><span class=p>)</span> <span class=c1># Outputs are integers</span>

<span class=n>xgb</span><span class=o>.</span><span class=n>predict_proba</span><span class=p>(</span><span class=n>test_Variable</span><span class=p>)</span> <span class=c1># Output scores , output structre: [prob for 0, prob for 1,...]</span>

<span class=n>xgb</span><span class=o>.</span><span class=n>save_model</span><span class=p>(</span><span class=s2>&quot;\Path\To\Where\You\Want\ModelName.model&quot;</span><span class=p>)</span> <span class=c1># Saving model</span>
</code></pre></div> The saved model <code>ModelName.model</code> is thus available for python and C/C++ api to load. Please use the XGBoost major version consistently (see <a href=#caveat>Caveat</a>).</p> <p>While training with data from different datasets, proper treatment of weights are necessary for better model performance. Please refer to <a href=https://xxxx>Official Recommendation</a> for more details.</p> <h2 id=cc-usage-with-cmssw>C/C++ Usage with CMSSW<a class=headerlink href=#cc-usage-with-cmssw title="Permanent link">&para;</a></h2> <p>To use a saved XGBoost model with C/C++ code, it is convenient to use the <a href=https://xgboost.readthedocs.io/en/stable/dev/c__api_8h.html><code>XGBoost's offical C api</code></a>. Here we provide a simple example as following.</p> <h3 id=module-setup>Module setup<a class=headerlink href=#module-setup title="Permanent link">&para;</a></h3> <p>There is no official CMSSW interface for XGBoost while its library are placed in <code>cvmfs</code> of CMSSW. Thus we have to use the raw <code>c_api</code> as well as setting up the library manually.</p> <ol> <li>To run XGBoost's <code>c_api</code> within CMSSW framework, in addition to the following standard setup. <div class=highlight><pre><span></span><code><span class=nb>export</span> <span class=nv>SCRAM_ARCH</span><span class=o>=</span><span class=s2>&quot;slc7_amd64_gcc700&quot;</span> <span class=c1># To use higher version, please switch to slc7_amd64_900</span>
<span class=nb>export</span> <span class=nv>CMSSW_VERSION</span><span class=o>=</span><span class=s2>&quot;CMSSW_X_Y_Z&quot;</span>

<span class=nb>source</span> /cvmfs/cms.cern.ch/cmsset_default.sh

cmsrel <span class=s2>&quot;</span><span class=nv>$CMSSW_VERSION</span><span class=s2>&quot;</span>
<span class=nb>cd</span> <span class=s2>&quot;</span><span class=nv>$CMSSW_VERSION</span><span class=s2>/src&quot;</span>

cmsenv
scram b
</code></pre></div> The addtional effort is to add corresponding xml file(s) to <code>$CMSSW_BASE/toolbox$CMSSW_BASE/config/toolbox/$SCRAM_ARCH/tools/selected/</code> for setting up XGBoost.</li> </ol> <blockquote> <ol> <li> <p>For lower version (&lt;1), add <strong>two</strong> xml files as below.</p> <blockquote> <p><code>xgboost.xml</code> <div class=highlight><pre><span></span><code> <span class=nt>&lt;tool</span> <span class=na>name=</span><span class=s>&quot;xgboost&quot;</span> <span class=na>version=</span><span class=s>&quot;0.80&quot;</span><span class=nt>&gt;</span>
 <span class=nt>&lt;lib</span> <span class=na>name=</span><span class=s>&quot;xgboost&quot;</span><span class=nt>/&gt;</span>
 <span class=nt>&lt;client&gt;</span>
    <span class=nt>&lt;environment</span> <span class=na>name=</span><span class=s>&quot;LIBDIR&quot;</span> <span class=na>default=</span><span class=s>&quot;/cvmfs/cms.cern.ch/$SCRAM_ARCH/external/py2-xgboost/0.80-ikaegh/lib/python2.7/site-packages/xgboost/lib&quot;</span><span class=nt>/&gt;</span>
    <span class=nt>&lt;environment</span> <span class=na>name=</span><span class=s>&quot;INCLUDE&quot;</span> <span class=na>default=</span><span class=s>&quot;/cvmfs/cms.cern.ch/$SCRAM_ARCH/external/py2-xgboost/0.80-ikaegh/lib/python2.7/site-packages/xgboost/include/&quot;</span><span class=nt>/&gt;</span>
  <span class=nt>&lt;/client&gt;</span>
  <span class=nt>&lt;runtime</span> <span class=na>name=</span><span class=s>&quot;ROOT_INCLUDE_PATH&quot;</span> <span class=na>value=</span><span class=s>&quot;$INCLUDE&quot;</span> <span class=na>type=</span><span class=s>&quot;path&quot;</span><span class=nt>/&gt;</span>
  <span class=nt>&lt;runtime</span> <span class=na>name=</span><span class=s>&quot;PATH&quot;</span> <span class=na>value=</span><span class=s>&quot;$INCLUDE&quot;</span> <span class=na>type=</span><span class=s>&quot;path&quot;</span><span class=nt>/&gt;</span>
  <span class=nt>&lt;use</span> <span class=na>name=</span><span class=s>&quot;rabit&quot;</span><span class=nt>/&gt;</span>
<span class=nt>&lt;/tool&gt;</span>
</code></pre></div> <code>rabit.xml</code> <div class=highlight><pre><span></span><code> <span class=nt>&lt;tool</span> <span class=na>name=</span><span class=s>&quot;rabit&quot;</span> <span class=na>version=</span><span class=s>&quot;0.80&quot;</span><span class=nt>&gt;</span>
   <span class=nt>&lt;client&gt;</span>
     <span class=nt>&lt;environment</span> <span class=na>name=</span><span class=s>&quot;INCLUDE&quot;</span> <span class=na>default=</span><span class=s>&quot;/cvmfs/cms.cern.ch/$SCRAM_ARCH/external/py2-xgboost/0.80-ikaegh/lib/python2.7/site-packages/xgboost/rabit/include/&quot;</span><span class=nt>/&gt;</span>
   <span class=nt>&lt;/client&gt;</span>
   <span class=nt>&lt;runtime</span> <span class=na>name=</span><span class=s>&quot;ROOT_INCLUDE_PATH&quot;</span> <span class=na>value=</span><span class=s>&quot;$INCLUDE&quot;</span> <span class=na>type=</span><span class=s>&quot;path&quot;</span><span class=nt>/&gt;</span>
   <span class=nt>&lt;runtime</span> <span class=na>name=</span><span class=s>&quot;PATH&quot;</span> <span class=na>value=</span><span class=s>&quot;$INCLUDE&quot;</span> <span class=na>type=</span><span class=s>&quot;path&quot;</span><span class=nt>/&gt;</span>  
 <span class=nt>&lt;/tool&gt;</span>
</code></pre></div> Please note that the path in <code>cvmfs</code> is not fixed, one can list all available versions in the <code>py2-xgboost</code> directory and choose one to use.</p> </blockquote> </li> <li> <p>For higher version (&gt;=1), and <strong>one</strong> xml file</p> <blockquote> <p><code>xgboost.xml</code> <div class=highlight><pre><span></span><code><span class=nt>&lt;tool</span> <span class=na>name=</span><span class=s>&quot;xgboost&quot;</span> <span class=na>version=</span><span class=s>&quot;0.80&quot;</span><span class=nt>&gt;</span>
  <span class=nt>&lt;lib</span> <span class=na>name=</span><span class=s>&quot;xgboost&quot;</span><span class=nt>/&gt;</span>
  <span class=nt>&lt;client&gt;</span>
    <span class=nt>&lt;environment</span> <span class=na>name=</span><span class=s>&quot;LIBDIR&quot;</span> <span class=na>default=</span><span class=s>&quot;/cvmfs/cms.cern.ch/$SCRAM_ARCH/external/xgboost/1.3.3/lib64&quot;</span><span class=nt>/&gt;</span>
    <span class=nt>&lt;environment</span> <span class=na>name=</span><span class=s>&quot;INCLUDE&quot;</span> <span class=na>default=</span><span class=s>&quot;/cvmfs/cms.cern.ch/$SCRAM_ARCH/external/xgboost/1.3.3/include/&quot;</span><span class=nt>/&gt;</span>
  <span class=nt>&lt;/client&gt;</span>
  <span class=nt>&lt;runtime</span> <span class=na>name=</span><span class=s>&quot;ROOT_INCLUDE_PATH&quot;</span> <span class=na>value=</span><span class=s>&quot;$INCLUDE&quot;</span> <span class=na>type=</span><span class=s>&quot;path&quot;</span><span class=nt>/&gt;</span>
  <span class=nt>&lt;runtime</span> <span class=na>name=</span><span class=s>&quot;PATH&quot;</span> <span class=na>value=</span><span class=s>&quot;$INCLUDE&quot;</span> <span class=na>type=</span><span class=s>&quot;path&quot;</span><span class=nt>/&gt;</span>  
<span class=nt>&lt;/tool&gt;</span>
</code></pre></div> Also one has the freedom to choose the available xgboost version inside <code>xgboost</code> directory.</p> </blockquote> </li> </ol> </blockquote> <ol> <li> <p>After adding xml file(s), the following commands should be executed for setting up.</p> <blockquote> <ol> <li>For lower version (&lt;1), use <div class=highlight><pre><span></span><code>scram setup rabit
scram setup xgboost
</code></pre></div></li> <li>For higher version (&gt;=1), use <div class=highlight><pre><span></span><code>scram setup xgboost
</code></pre></div></li> </ol> </blockquote> </li> <li> <p>For using XGBoost as a plugin of CMSSW, it is necessary to add <div class=highlight><pre><span></span><code><span class=nt>&lt;use</span> <span class=na>name=</span><span class=s>&quot;xgboost&quot;</span><span class=nt>/&gt;</span>
<span class=nt>&lt;flags</span> <span class=na>EDM_PLUGIN=</span><span class=s>&quot;1&quot;</span><span class=nt>/&gt;</span>
</code></pre></div> in your <code>plugins/BuildFile.xml</code>. If you are using the interface inside the <code>src/</code> or <code>interface/</code> directory of your module, make sure to create a global <code>BuildFile.xml</code> file next to theses directories, containing (at least): <div class=highlight><pre><span></span><code><span class=nt>&lt;use</span> <span class=na>name=</span><span class=s>&quot;xgboost&quot;</span><span class=nt>/&gt;</span>
<span class=nt>&lt;export&gt;</span>
  <span class=nt>&lt;lib</span>   <span class=na>name=</span><span class=s>&quot;1&quot;</span><span class=nt>/&gt;</span>
<span class=nt>&lt;/export&gt;</span>
</code></pre></div></p> </li> <li> <p>The <code>libxgboost.so</code> would be too large to load for <code>cmsRun</code> job, please using the following commands for pre-loading: <div class=highlight><pre><span></span><code><span class=nb>export</span> <span class=nv>LD_PRELOAD</span><span class=o>=</span><span class=nv>$CMSSW_BASE</span>/external/<span class=nv>$SCRAM_ARCH</span>/lib/libxgboost.so
</code></pre></div></p> </li> </ol> <h3 id=basic-usage-of-c-api>Basic Usage of C API<a class=headerlink href=#basic-usage-of-c-api title="Permanent link">&para;</a></h3> <p>In order to use <code>c_api</code> of XGBoost to load model and operate inference, one should construct necessaries objects:</p> <ol> <li> <p>Files to include <div class=highlight><pre><span></span><code><span class=cp>#include</span> <span class=cpf>&lt;xgboost/c_api.h&gt; </span><span class=cp></span>
</code></pre></div></p> </li> <li> <p><code>BoosterHandle</code>: worker of XGBoost <div class=highlight><pre><span></span><code><span class=c1>// Declare Object</span>
<span class=n>BoosterHandle</span> <span class=n>booster_</span><span class=p>;</span>
<span class=c1>// Allocate memory in C style</span>
<span class=n>XGBoosterCreate</span><span class=p>(</span><span class=nb>NULL</span><span class=p>,</span><span class=mi>0</span><span class=p>,</span><span class=o>&amp;</span><span class=n>booster_</span><span class=p>);</span>
<span class=c1>// Load Model</span>
<span class=n>XGBoosterLoadModel</span><span class=p>(</span><span class=n>booster_</span><span class=p>,</span><span class=n>model_path</span><span class=p>.</span><span class=n>c_str</span><span class=p>());</span> <span class=c1>// second argument should be a const char *.</span>
</code></pre></div></p> </li> <li> <p><code>DMatrixHandle</code>: handle to dmatrix, the data format of XGBoost <div class=highlight><pre><span></span><code><span class=kt>float</span> <span class=n>TestData</span><span class=p>[</span><span class=mi>2000</span><span class=p>][</span><span class=mi>8</span><span class=p>]</span> <span class=c1>// Suppose 2000 data points, each data point has 8 dimension</span>
<span class=c1>// Assign data to the &quot;TestData&quot; 2d array ... </span>
<span class=c1>// Declare object</span>
<span class=n>DMatrixHandle</span> <span class=n>data_</span><span class=p>;</span>
<span class=c1>// Allocate memory and use external float array to initialize</span>
<span class=n>XGDMatrixCreateFromMat</span><span class=p>((</span><span class=kt>float</span> <span class=o>*</span><span class=p>)</span><span class=n>TestData</span><span class=p>,</span><span class=mi>2000</span><span class=p>,</span><span class=mi>8</span><span class=p>,</span><span class=o>-</span><span class=mi>1</span><span class=p>,</span><span class=o>&amp;</span><span class=n>data_</span><span class=p>);</span> <span class=c1>// The first argument takes in float * namely 1d float array only, 2nd &amp; 3rd: shape of input, 4th: value to replace missing ones</span>
</code></pre></div></p> </li> <li> <p><code>XGBoosterPredict</code>: function for inference <div class=highlight><pre><span></span><code><span class=n>bst_ulong</span> <span class=n>outlen</span><span class=p>;</span> <span class=c1>// bst_ulong is a typedef of unsigned long</span>
<span class=k>const</span> <span class=kt>float</span> <span class=o>*</span><span class=n>f</span><span class=p>;</span> <span class=c1>// array to store predictions</span>
<span class=n>XGBoosterPredict</span><span class=p>(</span><span class=n>booster_</span><span class=p>,</span><span class=n>data_</span><span class=p>,</span><span class=mi>0</span><span class=p>,</span><span class=mi>0</span><span class=p>,</span><span class=o>&amp;</span><span class=n>out_len</span><span class=p>,</span><span class=o>&amp;</span><span class=n>f</span><span class=p>);</span><span class=c1>// lower version API</span>
<span class=c1>// XGBoosterPredict(booster_,data_,0,0,0,&amp;out_len,&amp;f);// higher version API</span>
<span class=cm>/*</span>
<span class=cm>lower version (ver.&lt;1) API</span>
<span class=cm>XGB_DLL int XGBoosterPredict(   </span>
<span class=cm>BoosterHandle   handle,</span>
<span class=cm>DMatrixHandle   dmat,</span>
<span class=cm>int     option_mask, // 0 for normal output, namely reporting scores</span>
<span class=cm>int     training, // 0 for prediction</span>
<span class=cm>bst_ulong *     out_len,</span>
<span class=cm>const float **  out_result </span>
<span class=cm>)</span>

<span class=cm>higher version (ver.&gt;=1) API</span>
<span class=cm>XGB_DLL int XGBoosterPredict(   </span>
<span class=cm>BoosterHandle   handle,</span>
<span class=cm>DMatrixHandle   dmat,</span>
<span class=cm>int     option_mask, // 0 for normal output, namely reporting scores</span>
<span class=cm>int ntree_limit, // how many trees for prediction, set to 0 means no limit</span>
<span class=cm>int     training, // 0 for prediction</span>
<span class=cm>bst_ulong *     out_len,</span>
<span class=cm>const float **  out_result </span>
<span class=cm>)</span>
<span class=cm>*/</span>
</code></pre></div></p> </li> </ol> <h3 id=full-example>Full Example<a class=headerlink href=#full-example title="Permanent link">&para;</a></h3> <details class=hint><summary>Click to expand full example</summary><p>The example assumes the following directory structure:</p> <p><div class=highlight><pre><span></span><code>MySubsystem/MyModule/
│
├── plugins/
│   ├── XGBoostExample.cc
│   └── BuildFile.xml
│
├── python/
│   └── xgboost_cfg.py
│
├── toolbox/ (storing necessary xml(s) to be copied to toolbox/ of $CMSSW_BASE)
│   └── xgboost.xml
│   └── rabit.xml (lower version only)
│
└── data/
    └── Test_data.csv
    └── lowVer.model / highVer.model 
</code></pre></div> Please also note that in order to operate inference in an event-by-event way, please put <code>XGBoosterPredict</code> in <code>analyze</code> rather than <code>beginJob</code>.</p> <div class=tabbed-set data-tabs=1:6><input checked=checked id=__tabbed_1_1 name=__tabbed_1 type=radio><label for=__tabbed_1_1>plugins/XGBoostExample.cc for lower version XGBoost</label><div class=tabbed-content> <table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197</pre></div></td><td class=code><div class=highlight><pre><span></span><code><span class=c1>// -*- C++ -*-</span>
<span class=hll><span class=c1>//</span>
</span><span class=c1>// Package:    XGB_Example/XGBoostExample</span>
<span class=c1>// Class:      XGBoostExample</span>
<span class=c1>//</span>
<span class=cm>/**\class XGBoostExample XGBoostExample.cc XGB_Example/XGBoostExample/plugins/XGBoostExample.cc</span>

<span class=cm> Description: [one line class summary]</span>

<span class=cm> Implementation:</span>
<span class=cm>     [Notes on implementation]</span>
<span class=cm>*/</span>
<span class=c1>//</span>
<span class=c1>// Original Author:  Qian Sitian</span>
<span class=c1>//         Created:  Sat, 19 Jun 2021 08:38:51 GMT</span>
<span class=c1>//</span>
<span class=c1>//</span>


<span class=c1>// system include files</span>
<span class=cp>#include</span> <span class=cpf>&lt;memory&gt;</span><span class=cp></span>

<span class=c1>// user include files</span>
<span class=cp>#include</span> <span class=cpf>&quot;FWCore/Framework/interface/Frameworkfwd.h&quot;</span><span class=cp></span>
<span class=cp>#include</span> <span class=cpf>&quot;FWCore/Framework/interface/one/EDAnalyzer.h&quot;</span><span class=cp></span>

<span class=cp>#include</span> <span class=cpf>&quot;FWCore/Framework/interface/Event.h&quot;</span><span class=cp></span>
<span class=cp>#include</span> <span class=cpf>&quot;FWCore/Framework/interface/MakerMacros.h&quot;</span><span class=cp></span>

<span class=cp>#include</span> <span class=cpf>&quot;FWCore/ParameterSet/interface/ParameterSet.h&quot;</span><span class=cp></span>
 <span class=cp>#include</span> <span class=cpf>&quot;FWCore/Utilities/interface/InputTag.h&quot;</span><span class=cp></span>
 <span class=cp>#include</span> <span class=cpf>&quot;DataFormats/TrackReco/interface/Track.h&quot;</span><span class=cp></span>
 <span class=cp>#include</span> <span class=cpf>&quot;DataFormats/TrackReco/interface/TrackFwd.h&quot;</span><span class=cp></span>

<span class=cp>#include</span> <span class=cpf>&lt;xgboost/c_api.h&gt;</span><span class=cp></span>
<span class=cp>#include</span> <span class=cpf>&lt;vector&gt;</span><span class=cp></span>
<span class=cp>#include</span> <span class=cpf>&lt;tuple&gt;</span><span class=cp></span>
<span class=cp>#include</span> <span class=cpf>&lt;string&gt;</span><span class=cp></span>
<span class=cp>#include</span> <span class=cpf>&lt;iostream&gt;</span><span class=cp></span>
<span class=cp>#include</span> <span class=cpf>&lt;fstream&gt;</span><span class=cp></span>
<span class=cp>#include</span> <span class=cpf>&lt;sstream&gt;</span><span class=cp></span>

<span class=k>using</span> <span class=k>namespace</span> <span class=n>std</span><span class=p>;</span>

<span class=n>vector</span><span class=o>&lt;</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>double</span><span class=o>&gt;&gt;</span> <span class=n>readinCSV</span><span class=p>(</span><span class=k>const</span> <span class=kt>char</span><span class=o>*</span> <span class=n>name</span><span class=p>){</span>
    <span class=k>auto</span> <span class=n>fin</span> <span class=o>=</span> <span class=n>ifstream</span><span class=p>(</span><span class=n>name</span><span class=p>);</span>
    <span class=n>vector</span><span class=o>&lt;</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>double</span><span class=o>&gt;&gt;</span> <span class=n>floatVec</span><span class=p>;</span>
    <span class=n>string</span> <span class=n>strFloat</span><span class=p>;</span>
    <span class=kt>float</span> <span class=n>fNum</span><span class=p>;</span>
    <span class=kt>int</span> <span class=n>counter</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
    <span class=n>getline</span><span class=p>(</span><span class=n>fin</span><span class=p>,</span><span class=n>strFloat</span><span class=p>);</span>
    <span class=k>while</span><span class=p>(</span><span class=n>getline</span><span class=p>(</span><span class=n>fin</span><span class=p>,</span><span class=n>strFloat</span><span class=p>))</span>
    <span class=p>{</span>
        <span class=n>std</span><span class=o>::</span><span class=n>stringstream</span>  <span class=n>linestream</span><span class=p>(</span><span class=n>strFloat</span><span class=p>);</span>
        <span class=n>floatVec</span><span class=p>.</span><span class=n>push_back</span><span class=p>(</span><span class=n>std</span><span class=o>::</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>double</span><span class=o>&gt;</span><span class=p>());</span>
        <span class=k>while</span><span class=p>(</span><span class=n>linestream</span><span class=o>&gt;&gt;</span><span class=n>fNum</span><span class=p>)</span>
        <span class=p>{</span>
            <span class=n>floatVec</span><span class=p>[</span><span class=n>counter</span><span class=p>].</span><span class=n>push_back</span><span class=p>(</span><span class=n>fNum</span><span class=p>);</span>
            <span class=k>if</span> <span class=p>(</span><span class=n>linestream</span><span class=p>.</span><span class=n>peek</span><span class=p>()</span> <span class=o>==</span> <span class=sc>&#39;,&#39;</span><span class=p>)</span>
            <span class=n>linestream</span><span class=p>.</span><span class=n>ignore</span><span class=p>();</span>
        <span class=p>}</span>
        <span class=o>++</span><span class=n>counter</span><span class=p>;</span>
    <span class=p>}</span>
    <span class=k>return</span> <span class=n>floatVec</span><span class=p>;</span>
<span class=p>}</span>

<span class=c1>//</span>
<span class=c1>// class declaration</span>
<span class=c1>//</span>

<span class=c1>// If the analyzer does not use TFileService, please remove</span>
<span class=c1>// the template argument to the base class so the class inherits</span>
<span class=c1>// from  edm::one::EDAnalyzer&lt;&gt;</span>
<span class=c1>// This will improve performance in multithreaded jobs.</span>



<span class=k>class</span> <span class=nc>XGBoostExample</span> <span class=o>:</span> <span class=k>public</span> <span class=n>edm</span><span class=o>::</span><span class=n>one</span><span class=o>::</span><span class=n>EDAnalyzer</span><span class=o>&lt;&gt;</span>  <span class=p>{</span>
   <span class=k>public</span><span class=o>:</span>
      <span class=k>explicit</span> <span class=n>XGBoostExample</span><span class=p>(</span><span class=k>const</span> <span class=n>edm</span><span class=o>::</span><span class=n>ParameterSet</span><span class=o>&amp;</span><span class=p>);</span>
      <span class=o>~</span><span class=n>XGBoostExample</span><span class=p>();</span>

      <span class=k>static</span> <span class=kt>void</span> <span class=nf>fillDescriptions</span><span class=p>(</span><span class=n>edm</span><span class=o>::</span><span class=n>ConfigurationDescriptions</span><span class=o>&amp;</span> <span class=n>descriptions</span><span class=p>);</span>


   <span class=k>private</span><span class=o>:</span>
      <span class=k>virtual</span> <span class=kt>void</span> <span class=n>beginJob</span><span class=p>()</span> <span class=p>;</span>
      <span class=k>virtual</span> <span class=kt>void</span> <span class=nf>analyze</span><span class=p>(</span><span class=k>const</span> <span class=n>edm</span><span class=o>::</span><span class=n>Event</span><span class=o>&amp;</span><span class=p>,</span> <span class=k>const</span> <span class=n>edm</span><span class=o>::</span><span class=n>EventSetup</span><span class=o>&amp;</span><span class=p>)</span> <span class=p>;</span>
      <span class=k>virtual</span> <span class=kt>void</span> <span class=nf>endJob</span><span class=p>()</span> <span class=p>;</span>

      <span class=c1>// ----------member data ---------------------------</span>

    <span class=n>std</span><span class=o>::</span><span class=n>string</span> <span class=n>test_data_path</span><span class=p>;</span>
    <span class=n>std</span><span class=o>::</span><span class=n>string</span> <span class=n>model_path</span><span class=p>;</span>




<span class=p>};</span>

<span class=c1>//</span>
<span class=c1>// constants, enums and typedefs</span>
<span class=c1>//</span>

<span class=c1>//</span>
<span class=c1>// static data member definitions</span>
<span class=c1>//</span>

<span class=c1>//</span>
<span class=c1>// constructors and destructor</span>
<span class=c1>//</span>
<span class=n>XGBoostExample</span><span class=o>::</span><span class=n>XGBoostExample</span><span class=p>(</span><span class=k>const</span> <span class=n>edm</span><span class=o>::</span><span class=n>ParameterSet</span><span class=o>&amp;</span> <span class=n>config</span><span class=p>)</span><span class=o>:</span>
<span class=n>test_data_path</span><span class=p>(</span><span class=n>config</span><span class=p>.</span><span class=n>getParameter</span><span class=o>&lt;</span><span class=n>std</span><span class=o>::</span><span class=n>string</span><span class=o>&gt;</span><span class=p>(</span><span class=s>&quot;test_data_path&quot;</span><span class=p>)),</span>
<span class=n>model_path</span><span class=p>(</span><span class=n>config</span><span class=p>.</span><span class=n>getParameter</span><span class=o>&lt;</span><span class=n>std</span><span class=o>::</span><span class=n>string</span><span class=o>&gt;</span><span class=p>(</span><span class=s>&quot;model_path&quot;</span><span class=p>))</span>
<span class=p>{</span>

<span class=p>}</span>


<span class=n>XGBoostExample</span><span class=o>::~</span><span class=n>XGBoostExample</span><span class=p>()</span>
<span class=p>{</span>

   <span class=c1>// do anything here that needs to be done at desctruction time</span>
   <span class=c1>// (e.g. close files, deallocate resources etc.)</span>

<span class=p>}</span>


<span class=c1>//</span>
<span class=c1>// member functions</span>
<span class=c1>//</span>

<span class=kt>void</span>
<span class=n>XGBoostExample</span><span class=o>::</span><span class=n>analyze</span><span class=p>(</span><span class=k>const</span> <span class=n>edm</span><span class=o>::</span><span class=n>Event</span><span class=o>&amp;</span> <span class=n>iEvent</span><span class=p>,</span> <span class=k>const</span> <span class=n>edm</span><span class=o>::</span><span class=n>EventSetup</span><span class=o>&amp;</span> <span class=n>iSetup</span><span class=p>)</span>
<span class=p>{</span>
<span class=p>}</span>


<span class=kt>void</span>
<span class=n>XGBoostExample</span><span class=o>::</span><span class=n>beginJob</span><span class=p>()</span>
<span class=p>{</span>
    <span class=n>BoosterHandle</span> <span class=n>booster_</span><span class=p>;</span>
    <span class=n>XGBoosterCreate</span><span class=p>(</span><span class=nb>NULL</span><span class=p>,</span><span class=mi>0</span><span class=p>,</span><span class=o>&amp;</span><span class=n>booster_</span><span class=p>);</span>
    <span class=n>cout</span><span class=o>&lt;&lt;</span><span class=s>&quot;Hello World No.2&quot;</span><span class=o>&lt;&lt;</span><span class=n>endl</span><span class=p>;</span>
    <span class=n>XGBoosterLoadModel</span><span class=p>(</span><span class=n>booster_</span><span class=p>,</span><span class=n>model_path</span><span class=p>.</span><span class=n>c_str</span><span class=p>());</span>
    <span class=kt>unsigned</span> <span class=kt>long</span> <span class=n>numFeature</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
    <span class=n>cout</span><span class=o>&lt;&lt;</span><span class=s>&quot;Hello World No.3&quot;</span><span class=o>&lt;&lt;</span><span class=n>endl</span><span class=p>;</span>
    <span class=n>vector</span><span class=o>&lt;</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>double</span><span class=o>&gt;&gt;</span> <span class=n>TestDataVector</span> <span class=o>=</span> <span class=n>readinCSV</span><span class=p>(</span><span class=n>test_data_path</span><span class=p>.</span><span class=n>c_str</span><span class=p>());</span>
    <span class=n>cout</span><span class=o>&lt;&lt;</span><span class=s>&quot;Hello World No.4&quot;</span><span class=o>&lt;&lt;</span><span class=n>endl</span><span class=p>;</span>
    <span class=kt>float</span> <span class=n>TestData</span><span class=p>[</span><span class=mi>2000</span><span class=p>][</span><span class=mi>8</span><span class=p>];</span>
    <span class=n>cout</span><span class=o>&lt;&lt;</span><span class=s>&quot;Hello World No.5&quot;</span><span class=o>&lt;&lt;</span><span class=n>endl</span><span class=p>;</span>
    <span class=k>for</span><span class=p>(</span><span class=kt>unsigned</span> <span class=n>i</span><span class=o>=</span><span class=mi>0</span><span class=p>;</span> <span class=p>(</span><span class=n>i</span> <span class=o>&lt;</span> <span class=mi>2000</span><span class=p>);</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span>
    <span class=p>{</span> 
        <span class=k>for</span><span class=p>(</span><span class=kt>unsigned</span> <span class=n>j</span><span class=o>=</span><span class=mi>0</span><span class=p>;</span> <span class=p>(</span><span class=n>j</span> <span class=o>&lt;</span> <span class=mi>8</span><span class=p>);</span> <span class=n>j</span><span class=o>++</span><span class=p>)</span>
        <span class=p>{</span>
            <span class=n>TestData</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=n>TestDataVector</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>];</span>
        <span class=c1>//  cout&lt;&lt;TestData[i][j]&lt;&lt;&quot;\t&quot;;</span>
        <span class=p>}</span> 
        <span class=c1>//cout&lt;&lt;endl;</span>
    <span class=p>}</span>
    <span class=n>cout</span><span class=o>&lt;&lt;</span><span class=s>&quot;Hello World No.6&quot;</span><span class=o>&lt;&lt;</span><span class=n>endl</span><span class=p>;</span>
    <span class=n>DMatrixHandle</span> <span class=n>data_</span><span class=p>;</span>
    <span class=n>XGDMatrixCreateFromMat</span><span class=p>((</span><span class=kt>float</span> <span class=o>*</span><span class=p>)</span><span class=n>TestData</span><span class=p>,</span><span class=mi>2000</span><span class=p>,</span><span class=mi>8</span><span class=p>,</span><span class=o>-</span><span class=mi>1</span><span class=p>,</span><span class=o>&amp;</span><span class=n>data_</span><span class=p>);</span>
    <span class=n>cout</span><span class=o>&lt;&lt;</span><span class=s>&quot;Hello World No.7&quot;</span><span class=o>&lt;&lt;</span><span class=n>endl</span><span class=p>;</span>
    <span class=n>bst_ulong</span> <span class=n>out_len</span><span class=o>=</span><span class=mi>0</span><span class=p>;</span>
      <span class=k>const</span> <span class=kt>float</span> <span class=o>*</span><span class=n>f</span><span class=p>;</span>
    <span class=n>cout</span><span class=o>&lt;&lt;</span><span class=n>out_len</span><span class=o>&lt;&lt;</span><span class=n>endl</span><span class=p>;</span>
    <span class=k>auto</span> <span class=n>ret</span><span class=o>=</span><span class=n>XGBoosterPredict</span><span class=p>(</span><span class=n>booster_</span><span class=p>,</span> <span class=n>data_</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span><span class=mi>0</span><span class=p>,</span><span class=o>&amp;</span><span class=n>out_len</span><span class=p>,</span><span class=o>&amp;</span><span class=n>f</span><span class=p>);</span>
    <span class=n>cout</span><span class=o>&lt;&lt;</span><span class=n>ret</span><span class=o>&lt;&lt;</span><span class=n>endl</span><span class=p>;</span>
          <span class=k>for</span> <span class=p>(</span><span class=kt>unsigned</span> <span class=kt>int</span> <span class=n>i</span><span class=o>=</span><span class=mi>0</span><span class=p>;</span><span class=n>i</span><span class=o>&lt;</span><span class=mi>2</span><span class=p>;</span><span class=n>i</span><span class=o>++</span><span class=p>)</span>
                    <span class=n>std</span><span class=o>::</span><span class=n>cout</span> <span class=o>&lt;&lt;</span>  <span class=n>i</span> <span class=o>&lt;&lt;</span> <span class=s>&quot;</span><span class=se>\t</span><span class=s>&quot;</span><span class=o>&lt;&lt;</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>&lt;&lt;</span> <span class=n>std</span><span class=o>::</span><span class=n>endl</span><span class=p>;</span>
    <span class=n>cout</span><span class=o>&lt;&lt;</span><span class=s>&quot;Hello World No.8&quot;</span><span class=o>&lt;&lt;</span><span class=n>endl</span><span class=p>;</span>
<span class=p>}</span>

<span class=kt>void</span>
<span class=n>XGBoostExample</span><span class=o>::</span><span class=n>endJob</span><span class=p>()</span>
<span class=p>{</span>
<span class=p>}</span>

<span class=kt>void</span>
<span class=n>XGBoostExample</span><span class=o>::</span><span class=n>fillDescriptions</span><span class=p>(</span><span class=n>edm</span><span class=o>::</span><span class=n>ConfigurationDescriptions</span><span class=o>&amp;</span> <span class=n>descriptions</span><span class=p>)</span> <span class=p>{</span>
  <span class=c1>//The following says we do not know what parameters are allowed so do no validation</span>
  <span class=c1>// Please change this to state exactly what you do use, even if it is no parameters</span>
  <span class=n>edm</span><span class=o>::</span><span class=n>ParameterSetDescription</span> <span class=n>desc</span><span class=p>;</span>
  <span class=n>desc</span><span class=p>.</span><span class=n>add</span><span class=o>&lt;</span><span class=n>std</span><span class=o>::</span><span class=n>string</span><span class=o>&gt;</span><span class=p>(</span><span class=s>&quot;test_data_path&quot;</span><span class=p>);</span>
  <span class=n>desc</span><span class=p>.</span><span class=n>add</span><span class=o>&lt;</span><span class=n>std</span><span class=o>::</span><span class=n>string</span><span class=o>&gt;</span><span class=p>(</span><span class=s>&quot;model_path&quot;</span><span class=p>);</span>
  <span class=n>descriptions</span><span class=p>.</span><span class=n>addWithDefaultLabel</span><span class=p>(</span><span class=n>desc</span><span class=p>);</span>

  <span class=c1>//Specify that only &#39;tracks&#39; is allowed</span>
  <span class=c1>//To use, remove the default given above and uncomment below</span>
  <span class=c1>//ParameterSetDescription desc;</span>
  <span class=c1>//desc.addUntracked&lt;edm::InputTag&gt;(&quot;tracks&quot;,&quot;ctfWithMaterialTracks&quot;);</span>
  <span class=c1>//descriptions.addDefault(desc);</span>
<span class=p>}</span>

<span class=c1>//define this as a plug-in</span>
<span class=n>DEFINE_FWK_MODULE</span><span class=p>(</span><span class=n>XGBoostExample</span><span class=p>);</span>
</code></pre></div> </td></tr></table> </div> <input id=__tabbed_1_2 name=__tabbed_1 type=radio><label for=__tabbed_1_2>plugins/BuildFile.xml for lower version XGBoost</label><div class=tabbed-content> <table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span>1
2
3
4
5
6</pre></div></td><td class=code><div class=highlight><pre><span></span><code><span class=nt>&lt;use</span> <span class=na>name=</span><span class=s>&quot;FWCore/Framework&quot;</span><span class=nt>/&gt;</span>
<span class=nt>&lt;use</span> <span class=na>name=</span><span class=s>&quot;FWCore/PluginManager&quot;</span><span class=nt>/&gt;</span>
<span class=nt>&lt;use</span> <span class=na>name=</span><span class=s>&quot;FWCore/ParameterSet&quot;</span><span class=nt>/&gt;</span>
<span class=nt>&lt;use</span> <span class=na>name=</span><span class=s>&quot;DataFormats/TrackReco&quot;</span><span class=nt>/&gt;</span>
<span class=nt>&lt;use</span> <span class=na>name=</span><span class=s>&quot;xgboost&quot;</span><span class=nt>/&gt;</span>
<span class=nt>&lt;flags</span> <span class=na>EDM_PLUGIN=</span><span class=s>&quot;1&quot;</span><span class=nt>/&gt;</span>
</code></pre></div> </td></tr></table> </div> <input id=__tabbed_1_3 name=__tabbed_1 type=radio><label for=__tabbed_1_3>python/xgboost_cfg.py for lower version XGBoost</label><div class=tabbed-content></div> <input id=__tabbed_1_4 name=__tabbed_1 type=radio><label for=__tabbed_1_4>plugins/XGBoostExample.cc for higher version XGBoost</label><div class=tabbed-content> <table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188</pre></div></td><td class=code><div class=highlight><pre><span></span><code><span class=c1>// -*- C++ -*-</span>
<span class=hll><span class=c1>//</span>
</span><span class=c1>// Package:    XGB_Example/XGBoostExample</span>
<span class=c1>// Class:      XGBoostExample</span>
<span class=c1>//</span>
<span class=cm>/**\class XGBoostExample XGBoostExample.cc XGB_Example/XGBoostExample/plugins/XGBoostExample.cc</span>

<span class=cm> Description: [one line class summary]</span>

<span class=cm> Implementation:</span>
<span class=cm>     [Notes on implementation]</span>
<span class=cm>*/</span>
<span class=c1>//</span>
<span class=c1>// Original Author:  Qian Sitian</span>
<span class=c1>//         Created:  Sat, 19 Jun 2021 08:38:51 GMT</span>
<span class=c1>//</span>
<span class=c1>//</span>


<span class=c1>// system include files</span>
<span class=cp>#include</span> <span class=cpf>&lt;memory&gt;</span><span class=cp></span>

<span class=c1>// user include files</span>
<span class=cp>#include</span> <span class=cpf>&quot;FWCore/Framework/interface/Frameworkfwd.h&quot;</span><span class=cp></span>
<span class=cp>#include</span> <span class=cpf>&quot;FWCore/Framework/interface/one/EDAnalyzer.h&quot;</span><span class=cp></span>

<span class=cp>#include</span> <span class=cpf>&quot;FWCore/Framework/interface/Event.h&quot;</span><span class=cp></span>
<span class=cp>#include</span> <span class=cpf>&quot;FWCore/Framework/interface/MakerMacros.h&quot;</span><span class=cp></span>

<span class=cp>#include</span> <span class=cpf>&quot;FWCore/ParameterSet/interface/ParameterSet.h&quot;</span><span class=cp></span>
 <span class=cp>#include</span> <span class=cpf>&quot;FWCore/Utilities/interface/InputTag.h&quot;</span><span class=cp></span>
 <span class=cp>#include</span> <span class=cpf>&quot;DataFormats/TrackReco/interface/Track.h&quot;</span><span class=cp></span>
 <span class=cp>#include</span> <span class=cpf>&quot;DataFormats/TrackReco/interface/TrackFwd.h&quot;</span><span class=cp></span>

<span class=cp>#include</span> <span class=cpf>&lt;xgboost/c_api.h&gt;</span><span class=cp></span>
<span class=cp>#include</span> <span class=cpf>&lt;vector&gt;</span><span class=cp></span>
<span class=cp>#include</span> <span class=cpf>&lt;tuple&gt;</span><span class=cp></span>
<span class=cp>#include</span> <span class=cpf>&lt;string&gt;</span><span class=cp></span>
<span class=cp>#include</span> <span class=cpf>&lt;iostream&gt;</span><span class=cp></span>
<span class=cp>#include</span> <span class=cpf>&lt;fstream&gt;</span><span class=cp></span>
<span class=cp>#include</span> <span class=cpf>&lt;sstream&gt;</span><span class=cp></span>

<span class=k>using</span> <span class=k>namespace</span> <span class=n>std</span><span class=p>;</span>

<span class=n>vector</span><span class=o>&lt;</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>double</span><span class=o>&gt;&gt;</span> <span class=n>readinCSV</span><span class=p>(</span><span class=k>const</span> <span class=kt>char</span><span class=o>*</span> <span class=n>name</span><span class=p>){</span>
    <span class=k>auto</span> <span class=n>fin</span> <span class=o>=</span> <span class=n>ifstream</span><span class=p>(</span><span class=n>name</span><span class=p>);</span>
    <span class=n>vector</span><span class=o>&lt;</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>double</span><span class=o>&gt;&gt;</span> <span class=n>floatVec</span><span class=p>;</span>
    <span class=n>string</span> <span class=n>strFloat</span><span class=p>;</span>
    <span class=kt>float</span> <span class=n>fNum</span><span class=p>;</span>
    <span class=kt>int</span> <span class=n>counter</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
    <span class=n>getline</span><span class=p>(</span><span class=n>fin</span><span class=p>,</span><span class=n>strFloat</span><span class=p>);</span>
    <span class=k>while</span><span class=p>(</span><span class=n>getline</span><span class=p>(</span><span class=n>fin</span><span class=p>,</span><span class=n>strFloat</span><span class=p>))</span>
    <span class=p>{</span>
        <span class=n>std</span><span class=o>::</span><span class=n>stringstream</span>  <span class=n>linestream</span><span class=p>(</span><span class=n>strFloat</span><span class=p>);</span>
        <span class=n>floatVec</span><span class=p>.</span><span class=n>push_back</span><span class=p>(</span><span class=n>std</span><span class=o>::</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>double</span><span class=o>&gt;</span><span class=p>());</span>
        <span class=k>while</span><span class=p>(</span><span class=n>linestream</span><span class=o>&gt;&gt;</span><span class=n>fNum</span><span class=p>)</span>
        <span class=p>{</span>
            <span class=n>floatVec</span><span class=p>[</span><span class=n>counter</span><span class=p>].</span><span class=n>push_back</span><span class=p>(</span><span class=n>fNum</span><span class=p>);</span>
            <span class=k>if</span> <span class=p>(</span><span class=n>linestream</span><span class=p>.</span><span class=n>peek</span><span class=p>()</span> <span class=o>==</span> <span class=sc>&#39;,&#39;</span><span class=p>)</span>
            <span class=n>linestream</span><span class=p>.</span><span class=n>ignore</span><span class=p>();</span>
        <span class=p>}</span>
        <span class=o>++</span><span class=n>counter</span><span class=p>;</span>
    <span class=p>}</span>
    <span class=k>return</span> <span class=n>floatVec</span><span class=p>;</span>
<span class=p>}</span>

<span class=c1>//</span>
<span class=c1>// class declaration</span>
<span class=c1>//</span>

<span class=c1>// If the analyzer does not use TFileService, please remove</span>
<span class=c1>// the template argument to the base class so the class inherits</span>
<span class=c1>// from  edm::one::EDAnalyzer&lt;&gt;</span>
<span class=c1>// This will improve performance in multithreaded jobs.</span>



<span class=k>class</span> <span class=nc>XGBoostExample</span> <span class=o>:</span> <span class=k>public</span> <span class=n>edm</span><span class=o>::</span><span class=n>one</span><span class=o>::</span><span class=n>EDAnalyzer</span><span class=o>&lt;&gt;</span>  <span class=p>{</span>
   <span class=k>public</span><span class=o>:</span>
      <span class=k>explicit</span> <span class=n>XGBoostExample</span><span class=p>(</span><span class=k>const</span> <span class=n>edm</span><span class=o>::</span><span class=n>ParameterSet</span><span class=o>&amp;</span><span class=p>);</span>
      <span class=o>~</span><span class=n>XGBoostExample</span><span class=p>();</span>

      <span class=k>static</span> <span class=kt>void</span> <span class=nf>fillDescriptions</span><span class=p>(</span><span class=n>edm</span><span class=o>::</span><span class=n>ConfigurationDescriptions</span><span class=o>&amp;</span> <span class=n>descriptions</span><span class=p>);</span>


   <span class=k>private</span><span class=o>:</span>
      <span class=k>virtual</span> <span class=kt>void</span> <span class=n>beginJob</span><span class=p>()</span> <span class=p>;</span>
      <span class=k>virtual</span> <span class=kt>void</span> <span class=nf>analyze</span><span class=p>(</span><span class=k>const</span> <span class=n>edm</span><span class=o>::</span><span class=n>Event</span><span class=o>&amp;</span><span class=p>,</span> <span class=k>const</span> <span class=n>edm</span><span class=o>::</span><span class=n>EventSetup</span><span class=o>&amp;</span><span class=p>)</span> <span class=p>;</span>
      <span class=k>virtual</span> <span class=kt>void</span> <span class=nf>endJob</span><span class=p>()</span> <span class=p>;</span>

      <span class=c1>// ----------member data ---------------------------</span>

    <span class=n>std</span><span class=o>::</span><span class=n>string</span> <span class=n>test_data_path</span><span class=p>;</span>
    <span class=n>std</span><span class=o>::</span><span class=n>string</span> <span class=n>model_path</span><span class=p>;</span>




<span class=p>};</span>

<span class=c1>//</span>
<span class=c1>// constants, enums and typedefs</span>
<span class=c1>//</span>

<span class=c1>//</span>
<span class=c1>// static data member definitions</span>
<span class=c1>//</span>

<span class=c1>//</span>
<span class=c1>// constructors and destructor</span>
<span class=c1>//</span>
<span class=n>XGBoostExample</span><span class=o>::</span><span class=n>XGBoostExample</span><span class=p>(</span><span class=k>const</span> <span class=n>edm</span><span class=o>::</span><span class=n>ParameterSet</span><span class=o>&amp;</span> <span class=n>config</span><span class=p>)</span><span class=o>:</span>
<span class=n>test_data_path</span><span class=p>(</span><span class=n>config</span><span class=p>.</span><span class=n>getParameter</span><span class=o>&lt;</span><span class=n>std</span><span class=o>::</span><span class=n>string</span><span class=o>&gt;</span><span class=p>(</span><span class=s>&quot;test_data_path&quot;</span><span class=p>)),</span>
<span class=n>model_path</span><span class=p>(</span><span class=n>config</span><span class=p>.</span><span class=n>getParameter</span><span class=o>&lt;</span><span class=n>std</span><span class=o>::</span><span class=n>string</span><span class=o>&gt;</span><span class=p>(</span><span class=s>&quot;model_path&quot;</span><span class=p>))</span>
<span class=p>{</span>

<span class=p>}</span>


<span class=n>XGBoostExample</span><span class=o>::~</span><span class=n>XGBoostExample</span><span class=p>()</span>
<span class=p>{</span>

   <span class=c1>// do anything here that needs to be done at desctruction time</span>
   <span class=c1>// (e.g. close files, deallocate resources etc.)</span>

<span class=p>}</span>


<span class=c1>//</span>
<span class=c1>// member functions</span>
<span class=c1>//</span>

<span class=kt>void</span>
<span class=n>XGBoostExample</span><span class=o>::</span><span class=n>analyze</span><span class=p>(</span><span class=k>const</span> <span class=n>edm</span><span class=o>::</span><span class=n>Event</span><span class=o>&amp;</span> <span class=n>iEvent</span><span class=p>,</span> <span class=k>const</span> <span class=n>edm</span><span class=o>::</span><span class=n>EventSetup</span><span class=o>&amp;</span> <span class=n>iSetup</span><span class=p>)</span>
<span class=p>{</span>
<span class=p>}</span>


<span class=kt>void</span>
<span class=n>XGBoostExample</span><span class=o>::</span><span class=n>beginJob</span><span class=p>()</span>
<span class=p>{</span>
    <span class=n>BoosterHandle</span> <span class=n>booster_</span><span class=p>;</span>
    <span class=n>XGBoosterCreate</span><span class=p>(</span><span class=nb>NULL</span><span class=p>,</span><span class=mi>0</span><span class=p>,</span><span class=o>&amp;</span><span class=n>booster_</span><span class=p>);</span>
    <span class=n>XGBoosterLoadModel</span><span class=p>(</span><span class=n>booster_</span><span class=p>,</span><span class=n>model_path</span><span class=p>.</span><span class=n>c_str</span><span class=p>());</span>
    <span class=kt>unsigned</span> <span class=kt>long</span> <span class=n>numFeature</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
    <span class=n>vector</span><span class=o>&lt;</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>double</span><span class=o>&gt;&gt;</span> <span class=n>TestDataVector</span> <span class=o>=</span> <span class=n>readinCSV</span><span class=p>(</span><span class=n>test_data_path</span><span class=p>.</span><span class=n>c_str</span><span class=p>());</span>
    <span class=kt>float</span> <span class=n>TestData</span><span class=p>[</span><span class=mi>2000</span><span class=p>][</span><span class=mi>8</span><span class=p>];</span>
    <span class=k>for</span><span class=p>(</span><span class=kt>unsigned</span> <span class=n>i</span><span class=o>=</span><span class=mi>0</span><span class=p>;</span> <span class=p>(</span><span class=n>i</span> <span class=o>&lt;</span> <span class=mi>2000</span><span class=p>);</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span>
    <span class=p>{</span> 
        <span class=k>for</span><span class=p>(</span><span class=kt>unsigned</span> <span class=n>j</span><span class=o>=</span><span class=mi>0</span><span class=p>;</span> <span class=p>(</span><span class=n>j</span> <span class=o>&lt;</span> <span class=mi>8</span><span class=p>);</span> <span class=n>j</span><span class=o>++</span><span class=p>)</span>
        <span class=p>{</span>
            <span class=n>TestData</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=n>TestDataVector</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>];</span>
        <span class=c1>//  cout&lt;&lt;TestData[i][j]&lt;&lt;&quot;\t&quot;;</span>
        <span class=p>}</span> 
        <span class=c1>//cout&lt;&lt;endl;</span>
    <span class=p>}</span>
    <span class=n>DMatrixHandle</span> <span class=n>data_</span><span class=p>;</span>
    <span class=n>XGDMatrixCreateFromMat</span><span class=p>((</span><span class=kt>float</span> <span class=o>*</span><span class=p>)</span><span class=n>TestData</span><span class=p>,</span><span class=mi>2000</span><span class=p>,</span><span class=mi>8</span><span class=p>,</span><span class=o>-</span><span class=mi>1</span><span class=p>,</span><span class=o>&amp;</span><span class=n>data_</span><span class=p>);</span>
    <span class=n>bst_ulong</span> <span class=n>out_len</span><span class=o>=</span><span class=mi>0</span><span class=p>;</span>
      <span class=k>const</span> <span class=kt>float</span> <span class=o>*</span><span class=n>f</span><span class=p>;</span>
    <span class=k>auto</span> <span class=n>ret</span><span class=o>=</span><span class=n>XGBoosterPredict</span><span class=p>(</span><span class=n>booster_</span><span class=p>,</span> <span class=n>data_</span><span class=p>,</span><span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span><span class=mi>0</span><span class=p>,</span><span class=o>&amp;</span><span class=n>out_len</span><span class=p>,</span><span class=o>&amp;</span><span class=n>f</span><span class=p>);</span>
          <span class=k>for</span> <span class=p>(</span><span class=kt>unsigned</span> <span class=kt>int</span> <span class=n>i</span><span class=o>=</span><span class=mi>0</span><span class=p>;</span><span class=n>i</span><span class=o>&lt;</span><span class=n>out_len</span><span class=p>;</span><span class=n>i</span><span class=o>++</span><span class=p>)</span>
                    <span class=n>std</span><span class=o>::</span><span class=n>cout</span> <span class=o>&lt;&lt;</span>  <span class=n>i</span> <span class=o>&lt;&lt;</span> <span class=s>&quot;</span><span class=se>\t</span><span class=s>&quot;</span><span class=o>&lt;&lt;</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>&lt;&lt;</span> <span class=n>std</span><span class=o>::</span><span class=n>endl</span><span class=p>;</span>
<span class=p>}</span>

<span class=kt>void</span>
<span class=n>XGBoostExample</span><span class=o>::</span><span class=n>endJob</span><span class=p>()</span>
<span class=p>{</span>
<span class=p>}</span>

<span class=kt>void</span>
<span class=n>XGBoostExample</span><span class=o>::</span><span class=n>fillDescriptions</span><span class=p>(</span><span class=n>edm</span><span class=o>::</span><span class=n>ConfigurationDescriptions</span><span class=o>&amp;</span> <span class=n>descriptions</span><span class=p>)</span> <span class=p>{</span>
  <span class=c1>//The following says we do not know what parameters are allowed so do no validation</span>
  <span class=c1>// Please change this to state exactly what you do use, even if it is no parameters</span>
  <span class=n>edm</span><span class=o>::</span><span class=n>ParameterSetDescription</span> <span class=n>desc</span><span class=p>;</span>
  <span class=n>desc</span><span class=p>.</span><span class=n>add</span><span class=o>&lt;</span><span class=n>std</span><span class=o>::</span><span class=n>string</span><span class=o>&gt;</span><span class=p>(</span><span class=s>&quot;test_data_path&quot;</span><span class=p>);</span>
  <span class=n>desc</span><span class=p>.</span><span class=n>add</span><span class=o>&lt;</span><span class=n>std</span><span class=o>::</span><span class=n>string</span><span class=o>&gt;</span><span class=p>(</span><span class=s>&quot;model_path&quot;</span><span class=p>);</span>
  <span class=n>descriptions</span><span class=p>.</span><span class=n>addWithDefaultLabel</span><span class=p>(</span><span class=n>desc</span><span class=p>);</span>

  <span class=c1>//Specify that only &#39;tracks&#39; is allowed</span>
  <span class=c1>//To use, remove the default given above and uncomment below</span>
  <span class=c1>//ParameterSetDescription desc;</span>
  <span class=c1>//desc.addUntracked&lt;edm::InputTag&gt;(&quot;tracks&quot;,&quot;ctfWithMaterialTracks&quot;);</span>
  <span class=c1>//descriptions.addDefault(desc);</span>
<span class=p>}</span>

<span class=c1>//define this as a plug-in</span>
<span class=n>DEFINE_FWK_MODULE</span><span class=p>(</span><span class=n>XGBoostExample</span><span class=p>);</span>
</code></pre></div> </td></tr></table> </div> <input id=__tabbed_1_5 name=__tabbed_1 type=radio><label for=__tabbed_1_5>plugins/BuildFile.xml for higher version XGBoost</label><div class=tabbed-content> <table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span>1
2
3
4
5
6</pre></div></td><td class=code><div class=highlight><pre><span></span><code><span class=nt>&lt;use</span> <span class=na>name=</span><span class=s>&quot;FWCore/Framework&quot;</span><span class=nt>/&gt;</span>
<span class=nt>&lt;use</span> <span class=na>name=</span><span class=s>&quot;FWCore/PluginManager&quot;</span><span class=nt>/&gt;</span>
<span class=nt>&lt;use</span> <span class=na>name=</span><span class=s>&quot;FWCore/ParameterSet&quot;</span><span class=nt>/&gt;</span>
<span class=nt>&lt;use</span> <span class=na>name=</span><span class=s>&quot;DataFormats/TrackReco&quot;</span><span class=nt>/&gt;</span>
<span class=nt>&lt;use</span> <span class=na>name=</span><span class=s>&quot;xgboost&quot;</span><span class=nt>/&gt;</span>
<span class=nt>&lt;flags</span> <span class=na>EDM_PLUGIN=</span><span class=s>&quot;1&quot;</span><span class=nt>/&gt;</span>
</code></pre></div> </td></tr></table> </div> <input id=__tabbed_1_6 name=__tabbed_1 type=radio><label for=__tabbed_1_6>python/xgboost_cfg.py for higher version XGBoost</label><div class=tabbed-content> <table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39</pre></div></td><td class=code><div class=highlight><pre><span></span><code><span class=c1># coding: utf-8</span>

<span class=kn>import</span> <span class=nn>os</span>

<span class=kn>import</span> <span class=nn>FWCore.ParameterSet.Config</span> <span class=k>as</span> <span class=nn>cms</span>
<span class=kn>from</span> <span class=nn>FWCore.ParameterSet.VarParsing</span> <span class=kn>import</span> <span class=n>VarParsing</span>

<span class=c1># setup minimal options</span>
<span class=c1>#options = VarParsing(&quot;python&quot;)</span>
<span class=c1>#options.setDefault(&quot;inputFiles&quot;, &quot;root://xrootd-cms.infn.it//store/mc/RunIIFall17MiniAOD/DYJetsToLL_M-10to50_TuneCP5_13TeV-madgraphMLM-pythia8/MINIAODSIM/94X_mc2017_realistic_v10-v2/00000/9A439935-1FFF-E711-AE07-D4AE5269F5FF.root&quot;)  # noqa</span>
<span class=c1>#options.parseArguments()</span>

<span class=c1># define the process to run</span>
<span class=n>process</span> <span class=o>=</span> <span class=n>cms</span><span class=o>.</span><span class=n>Process</span><span class=p>(</span><span class=s2>&quot;TEST&quot;</span><span class=p>)</span>

<span class=c1># minimal configuration</span>
<span class=n>process</span><span class=o>.</span><span class=n>load</span><span class=p>(</span><span class=s2>&quot;FWCore.MessageService.MessageLogger_cfi&quot;</span><span class=p>)</span>
<span class=n>process</span><span class=o>.</span><span class=n>MessageLogger</span><span class=o>.</span><span class=n>cerr</span><span class=o>.</span><span class=n>FwkReport</span><span class=o>.</span><span class=n>reportEvery</span> <span class=o>=</span> <span class=mi>1</span>
<span class=n>process</span><span class=o>.</span><span class=n>maxEvents</span> <span class=o>=</span> <span class=n>cms</span><span class=o>.</span><span class=n>untracked</span><span class=o>.</span><span class=n>PSet</span><span class=p>(</span><span class=nb>input</span><span class=o>=</span><span class=n>cms</span><span class=o>.</span><span class=n>untracked</span><span class=o>.</span><span class=n>int32</span><span class=p>(</span><span class=mi>10</span><span class=p>))</span>
<span class=c1>#process.source = cms.Source(&quot;PoolSource&quot;,</span>
<span class=c1>#    fileNames=cms.untracked.vstring(&#39;file:/afs/cern.ch/cms/Tutorials/TWIKI_DATA/TTJets_8TeV_53X.root&#39;))</span>
<span class=n>process</span><span class=o>.</span><span class=n>source</span> <span class=o>=</span> <span class=n>cms</span><span class=o>.</span><span class=n>Source</span><span class=p>(</span><span class=s2>&quot;EmptySource&quot;</span><span class=p>)</span>
<span class=c1>#process.source = cms.Source(&quot;PoolSource&quot;,</span>
<span class=c1>#    fileNames=cms.untracked.vstring(options.inputFiles))</span>
<span class=c1># process options</span>
<span class=n>process</span><span class=o>.</span><span class=n>options</span> <span class=o>=</span> <span class=n>cms</span><span class=o>.</span><span class=n>untracked</span><span class=o>.</span><span class=n>PSet</span><span class=p>(</span>
    <span class=n>allowUnscheduled</span><span class=o>=</span><span class=n>cms</span><span class=o>.</span><span class=n>untracked</span><span class=o>.</span><span class=n>bool</span><span class=p>(</span><span class=kc>True</span><span class=p>),</span>
    <span class=n>wantSummary</span><span class=o>=</span><span class=n>cms</span><span class=o>.</span><span class=n>untracked</span><span class=o>.</span><span class=n>bool</span><span class=p>(</span><span class=kc>True</span><span class=p>),</span>
<span class=p>)</span>

<span class=n>process</span><span class=o>.</span><span class=n>XGBoostExample</span> <span class=o>=</span> <span class=n>cms</span><span class=o>.</span><span class=n>EDAnalyzer</span><span class=p>(</span><span class=s2>&quot;XGBoostExample&quot;</span><span class=p>)</span>

<span class=c1># setup MyPlugin by loading the auto-generated cfi (see MyPlugin.fillDescriptions)</span>
<span class=c1>#process.load(&quot;XGB_Example.XGBoostExample.XGBoostExample_cfi&quot;)</span>
<span class=n>process</span><span class=o>.</span><span class=n>XGBoostExample</span><span class=o>.</span><span class=n>model_path</span> <span class=o>=</span> <span class=n>cms</span><span class=o>.</span><span class=n>string</span><span class=p>(</span><span class=s2>&quot;/Your/Path/data/highVer.model&quot;</span><span class=p>)</span>  
<span class=n>process</span><span class=o>.</span><span class=n>XGBoostExample</span><span class=o>.</span><span class=n>test_data_path</span> <span class=o>=</span> <span class=n>cms</span><span class=o>.</span><span class=n>string</span><span class=p>(</span><span class=s2>&quot;/Your/Path/data/Test_data.csv&quot;</span><span class=p>)</span>

<span class=c1># define what to run in the path</span>
<span class=n>process</span><span class=o>.</span><span class=n>p</span> <span class=o>=</span> <span class=n>cms</span><span class=o>.</span><span class=n>Path</span><span class=p>(</span><span class=n>process</span><span class=o>.</span><span class=n>XGBoostExample</span><span class=p>)</span>
</code></pre></div> </td></tr></table> </div> </div> </details> <h2 id=python-usage>Python Usage<a class=headerlink href=#python-usage title="Permanent link">&para;</a></h2> <p>To use XGBoost's python interface, using the snippet below <strong>under CMSSW environment</strong> <div class=highlight><pre><span></span><code><span class=c1># importing necessary models</span>
<span class=kn>import</span> <span class=nn>numpy</span> <span class=k>as</span> <span class=nn>np</span>
<span class=kn>import</span> <span class=nn>pandas</span> <span class=k>as</span> <span class=nn>pd</span> 
<span class=kn>from</span> <span class=nn>xgboost</span> <span class=kn>import</span> <span class=n>XGBClassifier</span>
<span class=kn>import</span> <span class=nn>matplotlib.pyplot</span> <span class=k>as</span> <span class=nn>plt</span>
<span class=kn>import</span> <span class=nn>pandas</span> <span class=k>as</span> <span class=nn>pd</span>


<span class=n>xgb</span> <span class=o>=</span> <span class=n>XGBClassifier</span><span class=p>()</span>
<span class=n>xgb</span><span class=o>.</span><span class=n>load_model</span><span class=p>(</span><span class=s1>&#39;ModelName.model&#39;</span><span class=p>)</span>

<span class=c1># After loading model, usage is the same as discussed in the model preparation section.</span>
</code></pre></div></p> <h2 id=caveat>Caveat<a class=headerlink href=#caveat title="Permanent link">&para;</a></h2> <p>It is worth mentioning that both behavior and APIs of different XGBoost version can have difference. </p> <ol> <li> <p>When using <code>c_api</code> for C/C++ inference, for <strong>ver.&lt;1</strong>, the API is <code>XGB_DLL int XGBoosterPredict(BoosterHandle handle, DMatrixHandle dmat,int option_mask, int training, bst_ulong * out_len,const float ** out_result)</code>, while for <strong>ver.&gt;=1</strong> the API changes to <code>XGB_DLL int XGBoosterPredict(BoosterHandle handle, DMatrixHandle dmat,int option_mask, unsigned int ntree_limit, int training, bst_ulong * out_len,const float ** out_result)</code>.</p> </li> <li> <p>Model from <strong>ver.&gt;=1</strong> <strong>cannot be used</strong> for <strong>ver.&lt;1</strong>.</p> </li> </ol> <p>Other important issue for C/C++ user is that DMatrix <strong>only</strong> takes in single precision floats (<code>float</code>), <strong>not</strong> double precision floats (<code>double</code>).</p> <h2 id=appendix-tips-for-xgboost-users>Appendix: Tips for XGBoost users<a class=headerlink href=#appendix-tips-for-xgboost-users title="Permanent link">&para;</a></h2> <h3 id=importance-plot>Importance Plot<a class=headerlink href=#importance-plot title="Permanent link">&para;</a></h3> <p>XGBoost uses <a href=https://en.wikipedia.org/wiki/F-score>F-score</a> to describe feature importance quantatitively. XGBoost's python API provides a nice tool,<code>plot_importance</code>, to plot the feature importance conveniently <strong>after finishing train</strong>. </p> <p><div class=highlight><pre><span></span><code><span class=c1># Once the training is done, the plot_importance function can thus be used to plot the feature importance.</span>
<span class=kn>from</span> <span class=nn>xgboost</span> <span class=kn>import</span> <span class=n>plot_importance</span> <span class=c1># Import the function</span>

<span class=n>plot_importance</span><span class=p>(</span><span class=n>xgb</span><span class=p>)</span> <span class=c1># suppose the xgboost object is named &quot;xgb&quot;</span>
<span class=n>plt</span><span class=o>.</span><span class=n>savefig</span><span class=p>(</span><span class=s2>&quot;importance_plot.pdf&quot;</span><span class=p>)</span> <span class=c1># plot_importance is based on matplotlib, so the plot can be saved use plt.savefig()</span>
</code></pre></div> <img alt=image src=../images/inference/xgboost/importance_plot.png> The importance plot is consistent with our expectation, as in our toy-model, the data points differ by most on the feature "7". (see <a href=#example-classification-of-points-from-joint-gaussian-distribution>toy model setup</a>).</p> <h3 id=roc-curve-and-auc>ROC Curve and AUC<a class=headerlink href=#roc-curve-and-auc title="Permanent link">&para;</a></h3> <p>The <a href=https://en.wikipedia.org/wiki/Receiver_operating_characteristic>receiver operating characteristic (ROC)</a> and auccrency (AUC) are key quantities to describe the model performance. For XGBoost, ROC curve and auc score can be easily obtained with the help of <a href=https://scikit-learn.org/ >sci-kit learn (sklearn)</a> functionals, which is also in CMSSW software. <div class=highlight><pre><span></span><code><span class=kn>from</span> <span class=nn>sklearn.metrics</span> <span class=kn>import</span> <span class=n>roc_auc_score</span><span class=p>,</span><span class=n>roc_curve</span><span class=p>,</span><span class=n>auc</span>
<span class=c1># ROC and AUC should be obtained on test set</span>
<span class=c1># Suppose the ground truth is &#39;y_test&#39;, and the output score is named as &#39;y_score&#39;</span>

<span class=n>fpr</span><span class=p>,</span> <span class=n>tpr</span><span class=p>,</span> <span class=n>_</span> <span class=o>=</span> <span class=n>roc_curve</span><span class=p>(</span><span class=n>y_test</span><span class=p>,</span> <span class=n>y_score</span><span class=p>)</span>
<span class=n>roc_auc</span> <span class=o>=</span> <span class=n>auc</span><span class=p>(</span><span class=n>fpr</span><span class=p>,</span> <span class=n>tpr</span><span class=p>)</span>

<span class=n>plt</span><span class=o>.</span><span class=n>figure</span><span class=p>()</span>
<span class=n>lw</span> <span class=o>=</span> <span class=mi>2</span>
<span class=n>plt</span><span class=o>.</span><span class=n>plot</span><span class=p>(</span><span class=n>fpr</span><span class=p>,</span> <span class=n>tpr</span><span class=p>,</span> <span class=n>color</span><span class=o>=</span><span class=s1>&#39;darkorange&#39;</span><span class=p>,</span>
         <span class=n>lw</span><span class=o>=</span><span class=n>lw</span><span class=p>,</span> <span class=n>label</span><span class=o>=</span><span class=s1>&#39;ROC curve (area = </span><span class=si>%0.2f</span><span class=s1>)&#39;</span> <span class=o>%</span> <span class=n>roc_auc</span><span class=p>)</span>
<span class=n>plt</span><span class=o>.</span><span class=n>plot</span><span class=p>([</span><span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>],</span> <span class=p>[</span><span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>],</span> <span class=n>color</span><span class=o>=</span><span class=s1>&#39;navy&#39;</span><span class=p>,</span> <span class=n>lw</span><span class=o>=</span><span class=n>lw</span><span class=p>,</span> <span class=n>linestyle</span><span class=o>=</span><span class=s1>&#39;--&#39;</span><span class=p>)</span>
<span class=n>plt</span><span class=o>.</span><span class=n>xlim</span><span class=p>([</span><span class=mf>0.0</span><span class=p>,</span> <span class=mf>1.0</span><span class=p>])</span>
<span class=n>plt</span><span class=o>.</span><span class=n>ylim</span><span class=p>([</span><span class=mf>0.0</span><span class=p>,</span> <span class=mf>1.05</span><span class=p>])</span>
<span class=n>plt</span><span class=o>.</span><span class=n>xlabel</span><span class=p>(</span><span class=s1>&#39;False Positive Rate&#39;</span><span class=p>)</span>
<span class=n>plt</span><span class=o>.</span><span class=n>ylabel</span><span class=p>(</span><span class=s1>&#39;True Positive Rate&#39;</span><span class=p>)</span>
<span class=n>plt</span><span class=o>.</span><span class=n>title</span><span class=p>(</span><span class=s1>&#39;Receiver operating characteristic example&#39;</span><span class=p>)</span>
<span class=n>plt</span><span class=o>.</span><span class=n>legend</span><span class=p>(</span><span class=n>loc</span><span class=o>=</span><span class=s2>&quot;lower right&quot;</span><span class=p>)</span>
<span class=c1># plt.show() # display the figure when not using jupyter display</span>
<span class=n>plt</span><span class=o>.</span><span class=n>savefig</span><span class=p>(</span><span class=s2>&quot;roc.png&quot;</span><span class=p>)</span> <span class=c1># resulting plot is shown below</span>
</code></pre></div> <img alt=image src=../images/inference/xgboost/roc.png></p> <h2 id=reference-of-xgboost>Reference of XGBoost<a class=headerlink href=#reference-of-xgboost title="Permanent link">&para;</a></h2> <ol> <li>XGBoost Wiki: <a href=https://en.wikipedia.org/wiki/XGBoost>https://en.wikipedia.org/wiki/XGBoost</a></li> <li>XGBoost Github Repo.: <a href=https://github.com/dmlc/xgboost>https://github.com/dmlc/xgboost</a></li> <li>XGBoost offical api tutorial</li> <li>Latest, Python: <a href=https://xgboost.readthedocs.io/en/latest/python/index.html>https://xgboost.readthedocs.io/en/latest/python/index.html</a></li> <li>Latest, C/C++: <a href=https://xgboost.readthedocs.io/en/latest/tutorials/c_api_tutorial.html>https://xgboost.readthedocs.io/en/latest/tutorials/c_api_tutorial.html</a></li> <li>Older (0.80), Python: <a href=https://xgboost.readthedocs.io/en/release_0.80/python/index.html>https://xgboost.readthedocs.io/en/release_0.80/python/index.html</a></li> <li>No Tutorial for older version C/C++ api, source code: <a href=https://github.com/dmlc/xgboost/blob/release_0.80/src/c_api/c_api.cc>https://github.com/dmlc/xgboost/blob/release_0.80/src/c_api/c_api.cc</a></li> </ol> <hr> <div class=md-source-date> <small> Last update: <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">September 27, 2022</span> </small> </div> </article> </div> </div> </main> <footer class=md-footer> <div class=md-footer-nav> <nav class="md-footer-nav__inner md-grid" aria-label=Footer> <a href=onnx.html title=ONNX class="md-footer-nav__link md-footer-nav__link--prev" rel=prev> <div class="md-footer-nav__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </div> <div class=md-footer-nav__title> <div class=md-ellipsis> <span class=md-footer-nav__direction> Previous </span> ONNX </div> </div> </a> <a href=hls4ml.html title=hls4ml class="md-footer-nav__link md-footer-nav__link--next" rel=next> <div class=md-footer-nav__title> <div class=md-ellipsis> <span class=md-footer-nav__direction> Next </span> hls4ml </div> </div> <div class="md-footer-nav__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg> </div> </a> </nav> </div> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> <div class=md-footer-copyright__highlight> Copyright &copy; 2020 CMS Machine Learning Group </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-footer-social> <a href=https://github.com/cms-ml target=_blank rel=noopener title=github.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 480 512"><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg> </a> <a href=https://hub.docker.com/orgs/cmsml/repositories target=_blank rel=noopener title=hub.docker.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 640 512"><path d="M349.9 236.3h-66.1v-59.4h66.1v59.4zm0-204.3h-66.1v60.7h66.1V32zm78.2 144.8H362v59.4h66.1v-59.4zm-156.3-72.1h-66.1v60.1h66.1v-60.1zm78.1 0h-66.1v60.1h66.1v-60.1zm276.8 100c-14.4-9.7-47.6-13.2-73.1-8.4-3.3-24-16.7-44.9-41.1-63.7l-14-9.3-9.3 14c-18.4 27.8-23.4 73.6-3.7 103.8-8.7 4.7-25.8 11.1-48.4 10.7H2.4c-8.7 50.8 5.8 116.8 44 162.1 37.1 43.9 92.7 66.2 165.4 66.2 157.4 0 273.9-72.5 328.4-204.2 21.4.4 67.6.1 91.3-45.2 1.5-2.5 6.6-13.2 8.5-17.1l-13.3-8.9zm-511.1-27.9h-66v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1v-59.4zm-78.1-72.1h-66.1v60.1h66.1v-60.1z"/></svg> </a> <a href=https://cms-talk.web.cern.ch/c/physics/ml/104 target=_blank rel=noopener title=cms-talk.web.cern.ch class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><path d="M256 32C114.6 32 0 125.1 0 240c0 49.6 21.4 95 57 130.7C44.5 421.1 2.7 466 2.2 466.5c-2.2 2.3-2.8 5.7-1.5 8.7S4.8 480 8 480c66.3 0 116-31.8 140.6-51.4 32.7 12.3 69 19.4 107.4 19.4 141.4 0 256-93.1 256-208S397.4 32 256 32zM128 272c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128 0c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128 0c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"/></svg> </a> <a href=mailto:hn-cms-machine-learning@cern.ch target=_blank rel=noopener title class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><path d="M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"/></svg> </a> </div> </div> </div> </footer> </div> <script src=../assets/javascripts/vendor.c3dc8c49.min.js></script> <script src=../assets/javascripts/bundle.f9edbbd5.min.js></script><script id=__lang type=application/json>{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script> <script>
        app = initialize({
          base: "..",
          features: ["instant"],
          search: Object.assign({
            worker: "../assets/javascripts/worker/search.8e2cddea.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script> <script src=https://unpkg.com/mermaid@8.6/dist/mermaid.min.js></script> <script src=../javascripts/mathjax.js></script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script> </body> </html>